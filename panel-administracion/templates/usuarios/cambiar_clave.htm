{literal}
<script language="javascript">

function before_submit(){
	var errores = "";
	
	if(document.forms["frmCambioClave"].elements["CLAVE"].value == ""){
		errores += "Por favor ingrese la clave actual.";
	}
	else{
		if(document.forms["frmCambioClave"].elements["NUEVA_CLAVE"].value == ""){
			errores += "\nPor favor ingrese la nueva clave.";
		}
		else{
			if(document.forms["frmCambioClave"].elements["NUEVA_CLAVE_CONFIRMACION"].value == ""){
				errores += "\nPor favor ingrese la confirmacion de la nueva clave.";
			}
			else{
				if(document.forms["frmCambioClave"].elements["NUEVA_CLAVE_CONFIRMACION"].value != document.forms["frmCambioClave"].elements["NUEVA_CLAVE"].value){
					errores += "\nLa nueva clave y su confirmacion deben ser iguales.";
				}
			}
		}
	}
	
	if(errores != ""){
		alert("No es posible cambiar la clave:\n"+errores);
	}
	else{
		document.forms["frmCambioClave"].submit();
	}
}

</script>
{/literal}
<form action="" method="POST" enctype="multipart/form-data" id="frmCambioClave" name="frmCambioClave" onsubmit="before_submit(); return false;">	
	{$NAVEGADOR}
	<table border="0" width="100%" cellpadding="1" cellspacing="0" valign="top">
		<tr>
			<td valign="top">
				<table border="0" width="100%" cellpadding="2" cellspacing="2">
					<tr>
						<th align="left" width="20%">Usuario</th>
						<th align="left" colspan="2">Nombre</th>
					</tr>
					<tr>
						<td align="left">
							<input type="text" id="LOGIN" name="LOGIN" value="{$LOGIN}" readonly="readonly">
						</td>
						<td align="left" colspan="2">
							<input type="text" id="NOMBRE_USUARIO" size="40" name="NOMBRE_USUARIO" value="{$NOMBRE_USUARIO}" readonly="readonly">
						</td>
					</tr>
					<tr>
						<td colspan="3"><hr></td>
					</tr>
					<tr>
						<th align="left" width="20%">Clave actual</th>
						<th align="left" width="20%">Nueva clave</th>
						<th align="left" width="60%">Confirmar nueva clave</th>
					</tr>
					<tr>
						<td align="left">
							<input type="password" id="CLAVE" name="CLAVE">
						</td>
						<td align="left">
							<input type="password" id="NUEVA_CLAVE" name="NUEVA_CLAVE" maxlength="15">
						</td>
						<td align="left">
							<input type="password" id="NUEVA_CLAVE_CONFIRMACION" name="NUEVA_CLAVE_CONFIRMACION" maxlength="15">
						</td>
					</tr>
				</table>
			</td>
		<tr>
	</table>
	<input type="hidden" name="ERROR" value="{$ERROR}">
</form>
{literal}
<script language="javascript">
	if (document.forms["frmCambioClave"].elements["ERROR"].value != "")
		alert(document.forms["frmCambioClave"].elements["ERROR"].value);
</script>
{/literal}